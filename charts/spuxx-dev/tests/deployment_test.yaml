suite: test deployment
values:
  - ./values/test.yaml
templates:
  - templates/deployment.yaml
tests:
  - it: should pass all kinds of assertion
    template: templates/deployment.yaml
    documentIndex: 0
    asserts:
      - equal:
          path: spec.template.spec.containers[?(@.name == "spuxx-dev")].image
          value: spuxx/spuxx-dev:master
      - contains:
          path: spec.template.spec.containers[?(@.name == "spuxx-dev")].ports
          content:
            containerPort: 3000
      - isNotEmpty:
          path: spec.template.spec.containers[?(@.name == "spuxx-dev")].livenessProbe